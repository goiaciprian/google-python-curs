{% extends 'base.html' %} {% block header %}
<h5>Employers</h5>
{% endblock %} {% block content %}
<div style="display: flex; gap: 2em; align-items: baseline">
  <div style="overflow-y: scroll; max-height: 10em">
    {% if employers %}
    <table>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Wage</th>
        <th>Action</th>
      </tr>
      {% for employer in employers %}
      <tr>
        <td>{{employer.id}}</td>
        <td>{{ employer.name}}</td>
        <td>{{ employer.wage}}</td>
        <td><button onclick="delete_emp({'id':{{employer.id}}})">Delete</button></td>
      </tr>
      {% endfor %}
    </table>
    
    {% endif %}
  </div>
  <div>
    <form
      action="/api/employers"
      method="POST"
      style="
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        width: max-content;
        gap: 1em;
      "
    >
      <label for="id">
        ID
        <input type="number" name="id" />
      </label>
      <label for="name">
        Name
        <input type="text" name="name" />
      </label>
      <label for="wage">
        Wage
        <input type="number" name="wage" />
      </label>
      <input type="submit" value="Submit" />
    </form>
  </div>
  <script>
    if (window.history.replaceState) {
      window.history.replaceState(null, null, window.location.href);
    }
    function delete_emp(employer) {
      fetch(`/api/employers/${employer.id}`, {
        method: "DELETE",
      }).then((res) => location.reload());
    }
  </script>
  <style type="text/css">
    td {
      padding: 0 20px;
    }
  </style>
</div>

{% endblock %}
