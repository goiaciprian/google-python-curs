{% extends 'base.html' %} {% block header %}
<h5>Users</h5>
{% endblock %} {% block content %}
<div style="display: flex; gap: 2em; align-items: baseline">
  <div>
    {% if users %}
    <table>
      <tr>
        <th>ID</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Email</th>
        <th>Action</th>
      </tr>
      {% for user in users %}
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.first_name }}</td>
        <td>{{ user.last_name }}</td>
        <td>{{ user.email }}</td>
        <td><button onclick="test({'id':{{user.id}}})">Delete</button></td>
      </tr>
      {% endfor %}
    </table>
    {% endif %}
  </div>
  <div>
    <form
      action="/api/users"
      method="POST"
      style="
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        width: max-content;
        gap: 1em;
      "
    >
      <label for="id">
        ID
        <input type="number" name="id" />
      </label>
      <label for="fname">
        First name
        <input type="text" name="fname" />
      </label>
      <label for="lname">
        Last name
        <input type="text" name="lname" />
      </label>

      <label for="email">
        Email
        <input type="email" name="email" />
      </label>
      <input type="submit" value="Submit" />
    </form>
  </div>
  <script>
    if (window.history.replaceState) {
      window.history.replaceState(null, null, window.location.href);
    }
    function test(employer) {
      console.log(employer);
      fetch(`/api/users/${employer.id}`, {
        method: "DELETE",
      }).then((res) => location.reload());
    }
  </script>
  <style type="text/css">
    td {
      padding: 0 20px;
    }
  </style>
</div>

{% endblock %}
